
---

## 第1章 计算机网络概述

*   重点内容：
    *   **计算机网络定义**: 一组自治的计算机通过通信线路互连，实现资源共享和信息交换。强调了“自治”和“互连”两个关键点。
    *   **计算机网络的基本功能**:
        *   资源共享：包括硬件资源（如打印机、存储设备）和软件资源（如数据、应用程序）。
        *   分布式处理与负载均衡：将任务分配到不同的计算机上处理，提高效率。
        *   综合信息服务：提供各种类型的应用，如电子邮件、视频会议等。
    *   **计算机网络的发展阶段**:
        *   主机互连：早期的雏形，通过低速串行连接。
        *   局域网（LAN）：解决本地大量计算机资源共享和协同操作的需求。以太网是主流技术。
        *   互联网（Internet）：将分布在不同地域的局域网连接起来，使用TCP/IP协议簇。
    *   **局域网、城域网和广域网: 按照覆盖范围大小划分**：
        *   局域网（LAN）：几千米范围内，通常为一个组织所有。
        *   城域网（MAN）：覆盖城市范围。
        *   广域网（WAN）：覆盖范围广，连接不同地域的局域网。
    *   **网络拓扑结构: 描述网络中设备的物理布局**：
        *   总线型：结构简单，成本低，但存在单点故障风险。
        *   星型：可靠性高，易于管理，但中心节点故障会影响整个网络。
        *   环型：结构简单，建网容易，但单一节点故障会影响整个环。
        *   网状：可靠性高，但成本高，结构复杂。
        *   ![](assets/第1篇%20计算机网络基础/网络拓扑结构.png)
    *   **数据交换方式**:
        *   电路交换：建立专用通道，独占带宽，延迟小，但资源利用率低。
        *   分组交换：数据分割成小分组传输，共享带宽，资源利用率高，但延迟可能较大。
    *   **衡量网络性能的指标**:
        *   带宽（Bandwidth）：描述单位时间内能够传输的数据量。
        *   延迟（Delay）：描述数据从一个节点传输到另一个节点所经历的时间。

---
## 第2章 OSI 参考模型与 TCP/IP 模型

*   **OSI 参考模型**：
    *   定义与作用： 开放系统互连参考模型，是一个七层结构的理论模型，用于标准化网络协议和设备，实现互联互通。提供了一个理解和设计网络体系结构的框架。
    *   各层作用：
        *   应用层（Application）：最接近用户的层，提供网络服务，如文件传输、电子邮件等。
        *   表示层（Presentation）：处理数据格式转换、加密解密。
        *   会话层（Session）：建立、管理和终止应用程序间的会话。
        *   传输层（Transport）：确保数据可靠地从端到端传递，提供流量控制、差错控制等。
        *   网络层（Network）：决定最佳路由，实现逻辑寻址。
        *   数据链路层（Data Link）：提供物理层的控制，成帧、寻址、差错检测与纠正。
        *   物理层（Physical）：传输原始比特流，定义物理特性（电压、接口等）。
    *   图示：  
	    ![](assets/第1篇%20计算机网络基础/OSI7层参考模型1.png)  
	    ![](assets/第1篇%20计算机网络基础/OSI7层参考模型2.png)
    *   **数据封装过程**：
        *   在发送方，每一层都在上层数据前添加头部（header），形成新的协议数据单元（PDU，Protocol Data Unit）。
        *   这个过程也称为封装（Encapsulation）。
        *   有些协议还在数据尾部添加尾部（trailer）。
        *   在接收方，每一层移除对应的头部，将数据传递给上层。
        *   这个过程也称为解封装（De-encapsulation）。
        *   图示：  
	        ![](assets/第1篇%20计算机网络基础/封装.png)

*   **TCP/IP 模型**：
    *   定义与作用： 传输控制协议/网际协议，是一个四层结构的模型，是实际应用的网络协议簇，用于实现全球互联网通信。
    *   各层作用：
        *   应用层：提供应用程序的网络服务，如HTTP、FTP、SMTP等。
        *   传输层：提供端到端的连接，TCP保证可靠性，UDP不保证。
        *   网络层：负责数据包的路由，主要协议包括IP、ICMP等。
        *   网络接口层：处理与传输介质相关的细节，例如以太网、令牌环等。
    *    图示：  
	    ![](assets/第1篇%20计算机网络基础/TCPIP4层参考模型.png)

---
## 第3章 局域网基本原理

*   **局域网类型**:
    *   以太网（Ethernet）：最广泛使用的局域网技术，具有简单、易于部署的特点。
    *   令牌环（Token Ring）：早期技术，机制复杂，可靠性较低，已被以太网取代。
    *   FDDI：早期用于骨干网，现在已被以太网取代。  
    *   图示：  
	    ![](assets/第1篇%20计算机网络基础/局域网与OSI的对应.png)
*   **以太网的介质**:
    *   双绞线：最常用，分为屏蔽双绞线（STP）和非屏蔽双绞线（UTP）。
    *   光纤：传输速率高，距离远，但成本高。
*   **以太网的协议和仲裁机制**:
    *   CSMA/CD（载波监听多路访问/冲突检测）：用于共享介质以太网，通过监听信道和检测冲突来避免数据传输冲突。
        *   通过监听介质来判断是否可以发送数据，如果发生冲突则停止发送。
    *   图示：  
	    ![](assets/第1篇%20计算机网络基础/以太网技术介绍.png)
*   **MAC地址结构**:
    *   MAC地址（介质访问控制地址）是唯一的物理地址，用于标识网络设备。
    *   由IEEE分配，长度为48位。
    *   分为OUI（组织唯一标识符）和EUI（扩展唯一标识符）。      
    *   图示：  
	    ![](assets/第1篇%20计算机网络基础/mac地址.png)
*   **WLAN技术基本原理**:
    *   WLAN（无线局域网）使用无线电波进行通信，具有移动性、易部署等优点。
    *   基于IEEE 802.11标准。
    *   WLAN的频率划分和信道选择。
    *   无线覆盖原则：蜂窝式覆盖，避免同频干扰。

---
## 第4章 IP 基本原理

*   **IP协议概述:**
    *   IP (Internet Protocol) 互联网协议是TCP/IP协议族的核心协议，位于网络层。
    *   它是一种无连接的、尽力而为的数据报协议，不保证数据包的可靠传输。
*   **IP的主要作用:**
	*   标识节点和链路
	    *   用唯一的IP地址标识每一个节点
	    *   用唯一的IP网络号标识每一个链路
	*   寻址和转发
	    *   确定节点所在网络的位置，进而确定节点所在的位置
	    *   IP路由器选择适当的路径将IP包转发到目的节点
	*   适应各种数据链路
	    *   根据链路的MTU对IP包进行分片和重组
	    *   为了通过实际的数据链路传递信息，须建立IP地址到数据链路层地址的映射
*   **IP网络的结构:**
    *   IP网络由路由器互联而成，路由器负责转发数据包。
    *   路由器根据路由表选择最佳路径，将数据包发送到下一跳路由器。
    *   IP网络可以分为不同的子网，通过子网掩码区分。
    *   图示：  
	    ![](assets/第1篇%20计算机网络基础/IP网络的结构.png)
*   **IP封装:**
    *   IP协议对上层协议（如TCP、UDP）的数据进行封装，添加IP头部。
    *   IP头部包含源IP地址、目标IP地址、协议类型、生存时间（TTL）等信息。
    *   IP封装后的数据包称为IP数据报。
    *   IP头格式：  
	    ![450](assets/第1篇%20计算机网络基础/IP头格式.png)  
	    ![](assets/第1篇%20计算机网络基础/IP头格式2.png)  
	    
*   **IP地址格式和表示方法:**
    *   IP地址是32位二进制数，用于标识网络中的设备。
    *   通常用点分十进制表示，例如：192.168.1.1。
    *   每个十进制数表示8位二进制数，范围是0-255。
    *   图示：  
	    ![](assets/第1篇%20计算机网络基础/IP地址格式和表示方法.png)
*   **IP地址分类:**
    *   IP地址分为A、B、C、D、E五类，通过IP地址的第一段来识别。
    *   A类：网络号占8位（1~126，127留作他用），主机号占24位。
    *   B类：网络号占16位（128~191），主机号占16位。
    *   C类：网络号占24位（192~223），主机号占8位。
    *   D类：用于组播地址。
    *   E类：保留地址，用于实验。
    *   图示：  
	    ![](assets/第1篇%20计算机网络基础/IP地址分类.png)
*   **特殊IP地址:**
    *   **0.0.0.0:** 表示本网络中的主机，或者无效的目标地址。
    *   **255.255.255.255:** 广播地址，用于向本网络内的所有主机发送数据。
    *   **127.0.0.1:** 回环地址，用于测试本机网络连接是否正常。
    *   **私有IP地址:** 用于局域网内部，不能在公网上使用。
        *   A类：10.0.0.0 - 10.255.255.255
        *   B类：172.16.0.0 - 172.31.255.255
        *   C类：192.168.0.0 - 192.168.255.255
*   **子网掩码:**
    *   用于确定IP地址的网络部分和主机部分。
    *   长度为32位，由连续的1和连续的0组成。
    *   1表示网络部分，0表示主机部分。
    *   例如：255.255.255.0 表示网络号占24位，主机号占8位。
    *   例题：  
	    ![400](assets/第1篇%20计算机网络基础/例题.png)  
	    解答：  
	    ![400](assets/第1篇%20计算机网络基础/解答.png)  
*   **路由基本概念和相关路由协议:**
    *   路由是指在网络中选择最佳路径的过程。
    *   路由器负责转发数据包，根据路由表进行转发。
    *   常见的路由协议包括：RIP、OSPF、BGP等。
- **ARP协议 (Address Resolution Protocol):**
    - **作用:** 将IP地址解析为MAC地址，用于在局域网内找到目标主机。
    - **工作原理:**
        1. 发送方（主机或路由器）构造一个ARP请求报文，包含目标IP地址。
        2. 将ARP请求报文封装在以太网帧中，并以广播方式发送到局域网内的所有主机。目标MAC地址填充为广播地址（FF:FF:FF:FF:FF:FF）。
        3. 局域网内的所有主机收到ARP请求报文后，检查其中的目标IP地址是否与自己的IP地址匹配。
        4. 如果匹配，目标主机构造一个ARP响应报文，包含自己的MAC地址。
        5. 目标主机将ARP响应报文封装在以太网帧中，并发送给请求方。MAC地址为请求方的MAC地址。
        6. 请求方收到ARP响应报文后，将IP地址和MAC地址的映射关系存储在ARP缓存表中，以便后续通信使用。
    - **ARP缓存表:** 存储IP地址到MAC地址的映射关系，可以减少ARP请求的发送，提高效率。 ARP缓存表具有生存时间（TTL），过期后需要重新进行ARP解析。
    - **ARP攻击:** 利用ARP协议的缺陷，伪造ARP响应报文，篡改ARP缓存表中的映射关系，导致网络通信异常。  
    - **图示**：  
	    ![550](assets/第1篇%20计算机网络基础/ARP.png)
- **RARP协议 (Reverse Address Resolution Protocol):**
    - **作用:** 将MAC地址解析为IP地址。 主要用于无盘工作站启动时获取IP地址。
    - **工作原理:**
        1. 无盘工作站发送RARP请求报文，包含自己的MAC地址。
        2. RARP服务器收到RARP请求报文后，根据MAC地址查找对应的IP地址。
        3. RARP服务器构造RARP响应报文，包含IP地址，并发送给无盘工作站。
        4. 无盘工作站收到RARP响应报文后，获取IP地址。
    - **局限性:** RARP协议只能用于同一物理网络，且需要配置RARP服务器。 DHCP协议在很大程度上取代了RARP协议的功能。
    - **图示**：  
	    ![550](assets/第1篇%20计算机网络基础/RARP.png)
- **IP数据包转发:**
    - **主机单播IP包转发:**
        1. 主机检查目标IP地址是否与自己在同一网段（通过子网掩码判断）。
        2. 如果在同一网段，主机直接使用ARP协议获取目标主机的MAC地址，然后将IP数据包封装在以太网帧中发送。
        3. 如果不在同一网段，主机需要将IP数据包发送到默认网关（路由器），然后由路由器进行转发。
        4. 图示：  
	        ![550](assets/第1篇%20计算机网络基础/主机单播IP包转发.png)
    - **路由器单播IP包转发:**
        1. 路由器收到IP数据包后，检查目标IP地址。
        2. 路由器查找自己的路由表，找到与目标IP地址最匹配的路由条目。
        3. 路由条目包含下一跳IP地址和出接口。
        4. 路由器将IP数据包转发到下一跳IP地址对应的路由器，直到到达目标网络。
        5. 如果路由表中没有匹配的路由条目，路由器会丢弃该数据包，并可能发送ICMP差错报告。
        6. 图示：  
	        ![550](assets/第1篇%20计算机网络基础/路由器单播IP包转发.png)
    - **主机接收IP包:**
        1. 主机接收到以太网帧后，检查目标MAC地址是否与自己的MAC地址匹配。
        2. 如果匹配，主机解封装以太网帧，得到IP数据包。
        3. 主机检查IP数据包的目标IP地址是否与自己的IP地址匹配。
        4. 如果匹配，主机将IP数据包交给上层协议处理（如TCP或UDP）。
        5. 如果不匹配，主机则丢弃该数据包。
        6. 图示：  
	        ![550](assets/第1篇%20计算机网络基础/主机接收IP包.png)
    - **广播风暴:** 当网络中存在环路时，广播数据包会在环路中不断循环，导致网络拥塞，形成广播风暴。 可以通过生成树协议（STP）等技术来避免广播风暴。  
	    图示：  
	    ![550](assets/第1篇%20计算机网络基础/广播风暴.png)
- **代理ARP (Proxy ARP):**
    - **作用:** 允许路由器代替局域网内的其他主机响应ARP请求。
    - **应用场景:**
        - 简化小型网络的配置，避免每台主机都需要配置默认网关。
        - 实现透明网关，允许不同网段的主机进行通信。
    - **工作原理:**
        1. 主机A发送ARP请求，请求主机B的MAC地址。
        2. 路由器收到ARP请求后，检查目标IP地址（主机B的IP地址）是否在自己连接的其他网络中。
        3. 如果在，路由器代替主机B响应ARP请求，将自己的MAC地址发送给主机A。
        4. 主机A将数据包发送给路由器，路由器再将数据包转发给主机B。
    * **图示**：   
	    ![550](assets/第1篇%20计算机网络基础/代理ARP.png)
- **ICMP (Internet Control Message Protocol):**
    - **作用:** 用于在IP主机或路由器之间传递控制消息，例如差错报告、网络诊断等。
    - **常见ICMP消息类型:**
        - **回显请求（Echo Request）和回显应答（Echo Reply）：** 用于测试网络连通性，Ping命令使用的就是这种类型。
        - **目标不可达（Destination Unreachable）：** 当数据包无法到达目标地址时，路由器会发送此消息。
        - **超时（Time Exceeded）：** 当数据包的生存时间（TTL）为0时，路由器会发送此消息。
        - **重定向（Redirect）：** 当路由器发现主机使用了次优路径时，会发送此消息，建议主机使用更优路径。
    - **Ping命令:** 基于ICMP回显请求和回显应答消息，测试网络连通性，并测量往返时间（RTT）。
    - **Traceroute命令:** 利用ICMP超时消息，跟踪数据包在网络中的传输路径。
    - **图示**：   
	    ![550](assets/第1篇%20计算机网络基础/ICMP.png)

---
## 第5章 TCP 和 UDP 基本原理

*   **TCP/UDP协议所提供的服务**:
    *   TCP（传输控制协议）：
        *   提供面向连接的、可靠的数据传输服务。
        *   通过三次握手建立连接，提供流量控制、差错控制和拥塞控制。
    *   UDP（用户数据报协议）：
        *   提供无连接的、不可靠的数据传输服务。
        *   适用于对实时性要求高、对可靠性要求不高的应用。
*   **TCP/UDP的报文结构**:
    *   TCP报文段：
        *   源端口、目标端口、序列号、确认号、首部长度、保留位、标志位、窗口大小、校验和、紧急指针、选项、填充。
    *   UDP数据报：
        *   源端口、目标端口、长度、校验和。
*   **TCP建立和拆除的过程**:
    *   建立连接（三次握手）：
        *   客户端发送SYN报文，请求建立连接。
        *   服务器发送SYN+ACK报文，确认客户端的请求。
        *   客户端发送ACK报文，确认服务器的请求。
    *   拆除连接（四次挥手）：
        *   一方发送FIN报文，请求关闭连接。
        *   另一方发送ACK报文，确认关闭请求。
        *   另一方也发送FIN报文，请求关闭连接。
        *   发起方发送ACK报文，确认关闭连接。
*   **TCP的滑动窗口机制**:
    *   用于流量控制，接收方可以通告发送方自己的接收窗口大小，发送方根据接收窗口大小调整发送速率。
*   **TCP的可靠性技术**:
    *   序列号和确认应答：保证数据的有序和可靠的传输。
    *   超时重传：如果发送方在一定时间内没有收到确认应答，则重新发送数据。
    *   校验和：检测数据在传输过程中是否发生错误。
